<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <!-- <link rel="stylesheet" href="css/index.css"> -->
    <title>ETCH-A-SKETCH</title>
  </head>
  <body>
    <script>
        
        let btnCreateNewGrid = document.createElement('button');
        btnCreateNewGrid.textContent = 'Create New Grid';
        document.body.appendChild(btnCreateNewGrid);

        let btnRandomColor = document.createElement('button');
        btnRandomColor.textContent = 'Random Color';
        document.body.appendChild(btnRandomColor);
        
        let btnBlack = document.createElement('button');
        btnBlack.textContent = 'Black Color';
        document.body.appendChild(btnBlack);

        let btn10Black = document.createElement('button');
        btn10Black.textContent = '10% Black';
        document.body.appendChild(btn10Black);

        let btnErase = document.createElement('button');
        btnErase.textContent = 'Erase';
        document.body.appendChild(btnErase);

        let restartBtn = document.createElement('button');
        restartBtn.textContent = 'reset';
        document.body.appendChild(restartBtn);
        
        let wrapper = document.createElement('div');
        wrapper.style.display = 'flex';
        wrapper.style.flexWrap = 'wrap';
        wrapper.style.width = '30rem';
        wrapper.style.height = '30rem';
        wrapper.style.margin = '2rem auto';
        wrapper.style.border = '1px solid gray';
        document.body.appendChild(wrapper);
        
        let num = 16;

        function createItems(){
          for(let i = 0; i < num*num; i++) {
            let item = document.createElement('div');
            wrapper.appendChild(item);
            item.style.width = ((30/num)*100)/30 + '%';
            item.style.height = ((30/num)*100)/30 + '%';
            item.style.border = '1px solid lightgray';
            
          }
        }

        let fields = wrapper.childNodes;
        

        function addBlackColor(){
          fields.forEach((fields) => {
            fields.addEventListener('mouseover', function(){
              fields.style.backgroundColor = 'black';
            })
          })
        }

        function addRandomColor(){
          fields.forEach((fields) => {
            fields.addEventListener('mouseover', function(){
              let getRandomColorHex = function(){
                  let red = Math.floor(Math.random() * 256);
                  let green = Math.floor(Math.random() * 256);
                  let blue = Math.floor(Math.random() * 256);
                  return `rgb(${red}, ${green}, ${blue})`;
              };
              fields.style.backgroundColor = getRandomColorHex();
            })
          })
        }

        function erase() {
          fields.forEach((fields) => {
            fields.addEventListener('mouseover', function(){
              fields.style.backgroundColor = 'white';
            })
          })
        }
        
        function black10Per(){
          // za svako polje slusaj mouseover u kome dodajes 10% crne na prethodnu boju
          
          let buttons = document.querySelectorAll('button');

          buttons.forEach((btn) => {
              btn.disabled = 'true';
          });
          fields.forEach((fields) => {
            fields.addEventListener('mouseover', function(){
              fields.style.backgroundColor = 'black';
              fields.style.opacity = '0.1';

                fields.addEventListener('mouseover', function(){ 
                  fields.style.opacity = '0.2';

                  fields.addEventListener('mouseover', function(){                   
                    fields.style.opacity = '0.3';

                    fields.addEventListener('mouseover', function(){                     
                      fields.style.opacity = '0.4';

                      fields.addEventListener('mouseover', function(){                      
                        fields.style.opacity = '0.5';

                        fields.addEventListener('mouseover', function(){                         
                          fields.style.opacity = '0.6';

                          fields.addEventListener('mouseover', function(){                         
                            fields.style.opacity = '0.7';

                            fields.addEventListener('mouseover', function(){                         
                              fields.style.opacity = '0.8';

                              fields.addEventListener('mouseover', function(){                            
                                fields.style.opacity = '0.9';

                                fields.addEventListener('mouseover', function(){                            
                                  fields.style.opacity = '1';
                                })
                              })
                            })
                          })
                        })
                      })
                    })
                  })
                })
            })
          })

        }
        
        function createGrid() {
          createItems();

          fields.forEach((fields) => {
            fields.addEventListener('mouseover', function(){
              fields.style.backgroundColor = 'black';
            })
          })
          
        }

        btnBlack.addEventListener('click', addBlackColor);

        btnRandomColor.addEventListener('click', addRandomColor);

        btnErase.addEventListener('click', erase);

        btn10Black.addEventListener('click', black10Per);
        
        btnCreateNewGrid.addEventListener('click', function(){
          //clears previous grid
          while (wrapper.firstChild) {
            wrapper.removeChild(wrapper.firstChild);
          }
          
          for(num = prompt('any number betwen 16 and 64'); num < 16 || num > 64; ) {
            num = prompt('any number betwen 16 and 64');
          }

          createGrid();
        })

        createGrid();

        restartBtn.addEventListener('click', function(){
          window.location.reload(true);
        })
       
    </script>
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
  </body>
</html>